<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contact Us</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bulma@1.0.2/css/bulma.min.css"
    />
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/contact.css" />
  </head>

  <body class="container-main">
    <div class="content">
      <div class="main-content">
        <div class="box">
          <div class="columns is-vcentered">
            <!-- Left Column: Title and Image -->
            <div class="column is-half">
              <h1 class="title">Contact Us</h1>

              <img
                src="images/Contact-Image-child-with-speakerphone.png"
                alt="Contact Image child with speakerphone"
                class="contact-image"
              />

              <h2 class="title">Get In Touch â€” We're Here to Help!</h2>
            </div>

            <!-- Right Column: Contact Form -->
            <div class="column is-half">
              <form onsubmit="return sendEmail(event)">
                <div class="field">
                  <label class="label">Name:</label>
                  <div class="control">
                    <input class="input" type="text" id="name" placeholder="e.g. Alex Smith" />
                  </div>
                </div>
              
                <div class="field">
                  <label class="label">Email:</label>
                  <div class="control">
                    <input class="input" type="email" id="email" placeholder="e.g. alex@example.com" />
                  </div>
                </div>
              
                <div class="field">
                  <label class="label">Subject:</label>
                  <div class="control">
                    <input class="input" type="text" id="subject" placeholder="e.g. Subject of issue" />
                  </div>
                </div>
              
                <div class="field">
                  <label class="label">Message:</label>
                  <div class="control">
                    <textarea class="textarea" id="message" placeholder="Describe your issue here..." rows="6"></textarea>
                  </div>
                </div>
              
                <button class="button is-primary is-fullwidth" type="submit">Submit</button>
              </form>

              <p class="register-text">
                Have an account? <a href="/login">Login here</a>
              </p>

            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
      function sendEmail(event) {
        // Stop the form from submitting normally
        event.preventDefault();
        // email to constant email address
        const MAIL_TO = "student-services@university.edu";
        
        // fetching email contents from form
        const email = document.getElementById("email").value;
        const subject = document.getElementById("subject").value;
        const message = document.getElementById("message").value;
        const name = document.getElementById("name").value;

        // formatted email message
        const bodyRaw = `Hi, \nMy name is ${name}.\n\n${message}\n\nRegards, ${name}\nMy email is - ${email}`;

        const subjectEncoded = encodeURIComponent(subject);
        const bodyEncoded = encodeURIComponent(bodyRaw);

        window.location.href = `mailto:${MAIL_TO}?subject=${subjectEncoded}&body=${bodyEncoded}`;
        return false;
      }
    </script>
  </body>
</html>
