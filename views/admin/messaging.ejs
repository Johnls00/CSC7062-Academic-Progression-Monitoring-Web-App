<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><%= title %></title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css"
    />
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/messaging.css" />
  </head>

  <body class="container-main">
    <div class="container mTop custom-wide-container">
      <%- include('../partials/header.ejs') %> <%-
      include('../partials/dashboard-pages-welcome.ejs') %>

      <!-- main body of messaging hub -->
      <div
        class="has-background-white p-6 mtopclear mybk3 rounded-box"
        style="margin-bottom: 2rem !important"
      >
        <div class="columns is-multiline">
          <div class="column is-half">
            <a href="" class="button is-primary is-medium">Send New Message</a>
          </div>
          <div class="column is-half">
            <a href="" class="button is-primary is-medium">Create New Notification</a>
          </div>

          <div class="column is-one-third">
            <nav class="panel panel-fixed-height">
              <!-- messaging panel title -->
              <p class="panel-heading">Messages and Notifications</p>

              <div class="panel-block">
                <!-- search bar  -->
                <p class="control has-icons-left">
                  <input class="input" type="text" placeholder="Search" />
                  <span class="icon is-left">
                    <i class="fas fa-search" aria-hidden="true"></i>
                  </span>
                </p>
              </div>
              <!-- tabs on panel -->
              <p class="panel-tabs">
                <a class="is-active">All</a>
                <a>Messages</a>
                <a>Notifications</a>
              </p>
              <!-- panel content -->
               <% console.log(messagesAndNotifications) %>
              <div class="scrollable-panel-blocks">
                <% messagesAndNotifications.forEach(item => { %>
                    <a class="panel-block">
                      <span class="panel-icon">
                        <i class="fas fa-book" aria-hidden="true"></i>
                      </span>
                      <%= item.subject %> <small>(<%= String (item.timestamp).substring(0,24) %>)</small>
                    </a>
                  <% }) %>
              </div>

              <div class="panel-block">
                <button class="button is-link is-outlined is-fullwidth">
                  Reset all filters
                </button>
              </div>
            </nav>
          </div>

          <div class="column is-two-thirds">
            <div class="box"></div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
